<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>button clicker (alpha)</title>
</head>

<body>
    <h1>button clicker (alpha)</h1>
    <div>
        <input id="myInput" type="number" value="1" min="0" pattern="[0-9]" placeholder="use to level up" />
        <button id="ok">&larr;level up that many times</button>
        <button id="myButton">0</button>
        <p>click = + [how many levels you have] points!</p>
    </div>
    <div>
        <p id="levelDisplay">Level: 1</p>
    </div>
    <p id="cost">cost for next level: 10</p>
    <button id="resetBtn">RESET</button>
    <button id="save">Save Game</button>
    <p id="savetxt"></p>
    <script>
        let score = Number(localStorage.getItem("score")) || 0;
        let level = Number(localStorage.getItem("level")) || 1;



        const button = document.getElementById("myButton");
        const levelBtn = document.getElementById("ok");
        const input = document.getElementById("myInput");
        const display = document.getElementById("levelDisplay");
        const costDisplay = document.getElementById("cost");
        const resetBtn = document.getElementById("resetBtn");
        const saveBtn = document.getElementById("save");
        resetBtn.onclick = function () {
            if (!confirm("Are you SURE you want to reset?")) return;

            score = 0;
            level = 1;

            button.textContent = score;
            display.textContent = "Level: " + level;

            let amount = parseInt(input.value, 10) || 1;
            costDisplay.textContent = "Cost for next level: " + (level * amount * 10);

            localStorage.setItem("score", score);
            localStorage.setItem("level", level);
        };

        saveBtn.onclick = function () {
            document.getElementById("savetxt").textContent = "Game Saved!";
            localStorage.setItem("score", score);
            localStorage.setItem("level", level);
            setTimeout(afterPause, 1000); // 3000 milliseconds = 3 seconds
            function afterPause() {
                document.getElementById("savetxt").textContent = "";
            }
        };
        button.textContent = score;                 // update score display

        display.textContent = "Level: " + level;    // update level display
        button.onclick = function () {
            score += level;
            button.textContent = score;
            localStorage.setItem("score", score);
        };
        input.oninput = function () {
            let amount = parseInt(input.value, 10) || 1;   // default = 1
            let cost = level * amount * 10;
            costDisplay.textContent = "Cost for next level: " + cost;
        };
        levelBtn.onclick = function () {

            let amount = parseInt(input.value, 10);   // how many levels player wants
            let cost = level * amount * 10;           // price calculation

            if (score >= cost) {
                score -= cost;
                level += amount;

                button.textContent = score;
                display.textContent = "Level: " + level;
                let nextAmount = parseInt(input.value, 10) || 1;
                let nextCost = level * nextAmount * 10;
                costDisplay.textContent = "Cost for next level: " + nextCost;
                localStorage.setItem("score", score);
                localStorage.setItem("level", level);
            }
        };

    </script>
</body>

</html>