<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>button clicker (beta)</title>
    <link id="mainCSS" rel="stylesheet" href="./btnclk.css">
    <style>
        body {
            background-color: rgb(207, 255, 253);
            color: rgb(0, 0, 0);
        }
    </style>
</head>

<body>
    <audio id="clickSound" src="./clk.mp3"></audio>
    <div id="css-test-element" style="display:none;"></div>
    <div id="cssError">
        <div class="errBox">
            <h1>‚ö†Ô∏è CSS Failed to Load</h1>
            <p>The page will not load without the stylesheet. please make sure that you downloaded the css file or is in
                your desktop.</p>
            <p>ERROR CODE 404: FILE_NOT_FOUND</p>
            <button id="continueBtn">atempt to check for CSS</button>
            <button id="rld" onclick="location.reload();">reload page</button>
            <button id="dwnld">download full CSS</button>
            <p id="atmp"></p>
        </div>
    </div>

    <!-- following script controlls button -->
    <script>
        const continueBtn = document.getElementById("continueBtn");
        const atmpText = document.getElementById("atmp");
        const dwnldBtn = document.getElementById("dwnld");
        const style = document.getElementById("download");
        const fallbackCSS = `
    #css-test-element { width: 10px; }

    #myButton {
        border-radius: 0 !important;
        width: auto !important;
        height: auto !important;
        padding: 1px 10px !important;
        font-size: 14px !important;
        transition: 150ms !important;
    }

    #myButton:hover {
        padding: 5px 15px !important;
        font-size: 19px !important;
    }

    #myButton:active {
        padding: 3px 12px !important;
        font-size: 14px !important;
        transition: 50ms !important;
    }
`;


        dwnldBtn.onclick = function () {
            btn = document.getElementById("continueBtn");
            const style = document.createElement("style");
            style.textContent = fallbackCSS;
            document.head.appendChild(style);
            btn.textContent = "continiue to page";
            atmpText.textContent = "‚úÖ CSS applied via internal fallback. please click 'continiue to page' to continiue.";
        };

        continueBtn.onclick = function () {
            const link = document.getElementById("mainCSS");
            link.href = "./btnclk.css?" + new Date().getTime(); // Force reload by appending timestamp

            // Check if CSS loads after a short delay
            setTimeout(() => {
                const test = getComputedStyle(document.getElementById("css-test-element")).width;
                if (test === "10px") {
                    // CSS loaded successfully
                    document.getElementById("cssError").style.display = "none";
                } else {
                    atmpText.textContent = "‚ö†Ô∏è CSS still failed to load. Please check your file location.";
                }

            }, 1000); // 1 second delay
        };
    </script>

    <style>
        /* Hidden by default */
        #cssError {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
            color: black;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 999999;
            font-family: Arial, sans-serif;
        }

        #cssError .errBox {
            max-width: 500px;
            padding: 20px;
        }

        #continueBtn {
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }

        #dwnld {
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }

        #rld {
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>

    <script>
        window.onload = function () {

            const test = getComputedStyle(document.getElementById("css-test-element")).width;

            if (test !== "10px") {
                // CSS didn't load
                document.getElementById("cssError").style.display = "flex";
            }
        };
    </script>

    <h1>button clicker (beta)</h1>

    <div>
        <input id="myInput" type="number" value="1" min="0" pattern="[1-9]" placeholder="use to level up" />
        <button id="ok">&larr;level up that many times</button>
        <button id="myButton">0</button>
        <div id="particleContainer"></div>
        <p>click = + [how many levels you have] points!</p>
    </div>
    <div>
        <p id="levelDisplay">Level: 1</p>
    </div>
    <p id="cost">cost for next level: 10</p>
    <button id="resetBtn">RESET</button>
    <button id="save">Save Game</button>
    <p id="savetxt"></p>

    <!-- Source - https://stackoverflow.com/a/3926750
    Posted by hairbo, modified by community. See post 'Timeline' for change history
    Retrieved 2025-11-29, License - CC BY-SA 3.0 -->
    <noscript>
        <style type="text/css">
            .pagecontainer {
                display: none;
            }
        </style>
        <div class="noscriptmsg">
            javascript is not supported by your browser or is disabled. note that the game does not support mobile
            devices.
            <p>ERROR CODE: SCRIPT_NOT_SUPPORTED</p>
        </div>
    </noscript>
    <!--end of source-->
    <p id="totclk">total clicks: 0</p>
    <button id="prestigeBtn" onclick="prestige()">Prestige (Requires 10,000,000,000 (10 billion) points)</button>
    <div id="prestigeInfo">Prestige Multiplier: x1</div>

    <h2>UPGRADES!!!</h2>
    <p>(tip: hover your mouse pointer over a buttton for the details of the upgrade)</p>
    <button id="clicker" title="each auto-cliker clicks 1 point per second">auto-clicker (500 points per
        clicker)</button>
    <p id="clickertxt">you have 0 auto-clickers</p>

    <button id="genBtn" title="each genrator produces 5 points per second">Generator (1000 points)</button>
    <p id="genTxt">You have 0 generators</p>

    <button id="facBtn" title="each factory makes 25 points per second">Factory (5000 points)</button>
    <p id="facTxt">You have 0 factories</p>

    <button id="reactBtn" title="each Quantum Reactor fuses 100 points per second">Quantum Reactor (25000
        points)</button>
    <p id="reactTxt">You have 0 reactors</p>

    <button id="grandma"
        title="to remember her loss, each grandma bakes 1 million points per second... she shall not be forgotten">RIP
        Grandma... (10 million points)</button>
    <p id="grandmatxt">You have 0 Grandmas</p>

    <style>
        #grandma {
            box-shadow: 0 0 12px 4px rgba(150, 80, 255, 0.4);
            border: 1px solid rgb(180, 130, 255);
            transition: 1s;
        }

        #grandma:hover {
            box-shadow: 0 0 20px 6px rgba(180, 120, 255, 0.7);
        }
    </style>

    <h3>achivements (scroll down)</h3>
    <p id="click">???</p>
    <p id="100clk">???</p>
    <p id="1000clk">???</p>
    <p id="100000clk">???</p>
    <p id="1auto">???</p>
    <p id="10auto">???</p>
    <p id="100auto">???</p>
    <p id="1gen">???</p>
    <p id="10gen">???</p>
    <p id="100gen">???</p>
    <p id="1fac">???</p>
    <p id="10fac">???</p>
    <p id="100fac">???</p>
    <p id="1reactor">???</p>
    <p id="10reactor">???</p>
    <p id="100reactor">???</p>
    <p id="1grandma">???</p>
    <p id="10grandma">???</p>
    <p id="100grandma">???</p>
    <script>
        // unlock sound play
        let clickSound = new Audio("clk.mp3");
        clickSound.volume = 0.4;
        document.body.addEventListener("mousedown", () => {
            clickSound.play().catch(() => { });
        }, { once: true });

        // load stored data
        let score = Number(localStorage.getItem("score")) || 0;
        let clicks = Number(localStorage.getItem("clicks")) || 0;
        let level = parseInt(localStorage.getItem("level")) || 1;
        let auto = Number(localStorage.getItem("auto")) || 0;
        let autoCost = Number(localStorage.getItem("autoCost")) || 500;
        let autoActive = false;
        let generators = Number(localStorage.getItem("generators")) || 0;
        let generatorCost = Number(localStorage.getItem("generatorCost")) || 1000;
        let factories = Number(localStorage.getItem("factories")) || 0;
        let factoryCost = Number(localStorage.getItem("factoryCost")) || 5000;
        let reactors = Number(localStorage.getItem("reactors")) || 0;
        let reactorCost = Number(localStorage.getItem("reactorCost")) || 25000;
        let grandmas = Number(localStorage.getItem("grandmas")) || 0;
        let grandmaCost = Number(localStorage.getItem("grandmaCost")) || 10000000;
        let prestigelvl = Number(localStorage.getItem("prestigeBtn")) || 0;
        let prestigeMult = Number(localStorage.getItem("prestigeInfo")) || 1;
        let upgrades = auto + generators + factories + reactors + grandmas
        let autoBoost = 0;

        // Prevent NaN bug from breaking game
        if (isNaN(score)) score = 0;
        if (isNaN(level)) level = 1;
        if (isNaN(auto)) auto = 0;
        if (isNaN(generators)) generators = 0;
        if (isNaN(factories)) factories = 0;
        if (isNaN(reactors)) reactors = 0;
        if (isNaN(grandmas)) grandmas = 0;


        const button = document.getElementById("myButton");
        const levelBtn = document.getElementById("ok");
        const input = document.getElementById("myInput");
        const display = document.getElementById("levelDisplay");
        const costDisplay = document.getElementById("cost");
        const resetBtn = document.getElementById("resetBtn");
        const saveBtn = document.getElementById("save");
        const buyAuto = document.getElementById("clicker");
        const autoInfo = document.getElementById("clickertxt");
        const genBtn = document.getElementById("genBtn");
        const genTxt = document.getElementById("genTxt");
        const facBtn = document.getElementById("facBtn");
        const facTxt = document.getElementById("facTxt");
        const reactBtn = document.getElementById("reactBtn");
        const reactTxt = document.getElementById("reactTxt");
        const grandmaBtn = document.getElementById("grandma");
        const grandmaTxt = document.getElementById("grandmatxt");
        const totclk = document.getElementById("totclk");
        totclk.textContent = "total clicks: " + clicks;

        let amount = parseInt(input.value, 10) || 1;
        costDisplay.textContent = "Cost for next level: " + (level * amount * 100);
        button.textContent = score;
        display.textContent = "Level: " + level;
        button.textContent = score;
        buyAuto.textContent = "Auto-clicker (" + autoCost + " points)";
        autoInfo.textContent = "You have " + auto + " auto-clickers";
        genBtn.textContent = "Generator (" + generatorCost + " points)";
        facBtn.textContent = "Factory (" + factoryCost + " points)";
        reactBtn.textContent = "Quantum Reactor (" + reactorCost + " points)";
        genTxt.textContent = "You have " + generators + " generators";
        facTxt.textContent = "You have " + factories + " factories";
        reactTxt.textContent = "You have " + reactors + " reactors";
        grandmaBtn.textContent = "RIP Grandma... (" + grandmaCost + " points)";
        grandmaTxt.textContent = "You have " + grandmas + " Grandmas";

        grandmaBtn.onclick = function () {
            if (score >= grandmaCost) {
                score -= grandmaCost;
                grandmas++;

                grandmaCost = Math.floor(grandmaCost * 1.75);

                localStorage.setItem("score", score);
                localStorage.setItem("grandmas", grandmas);
                localStorage.setItem("grandmaCost", grandmaCost);

                button.textContent = score;
                grandmaBtn.textContent = "RIP Grandma... (" + grandmaCost + " points)";
                grandmaTxt.textContent = "You have " + grandmas + " Grandmas";
                checkAchivements();
            }
        };

        genBtn.onclick = function () {
            if (score >= generatorCost) {
                score -= generatorCost;
                generators++;

                generatorCost = Math.floor(generatorCost * 1.5);

                localStorage.setItem("score", score);
                localStorage.setItem("generators", generators);
                localStorage.setItem("generatorCost", generatorCost);

                button.textContent = score;
                genBtn.textContent = "Generator (" + generatorCost + " points)";
                genTxt.textContent = "You have " + generators + " generators";
                checkAchivements();
            }
        };

        facBtn.onclick = function () {
            if (score >= factoryCost) {
                score -= factoryCost;
                factories++;

                factoryCost = Math.floor(factoryCost * 1.6);

                localStorage.setItem("score", score);
                localStorage.setItem("factories", factories);
                localStorage.setItem("factoryCost", factoryCost);

                button.textContent = score;
                facBtn.textContent = "Factory (" + factoryCost + " points)";
                facTxt.textContent = "You have " + factories + " factories";
                checkAchivements();
            }
        };
        reactBtn.onclick = function () {
            if (score >= reactorCost) {
                score -= reactorCost;
                reactors++;

                reactorCost = Math.floor(reactorCost * 1.7);

                localStorage.setItem("score", score);
                localStorage.setItem("reactors", reactors);
                localStorage.setItem("reactorCost", reactorCost);

                button.textContent = score;
                reactBtn.textContent = "Quantum Reactor (" + reactorCost + " points)";
                reactTxt.textContent = "You have " + reactors + " reactors";
                checkAchivements();
            }
        };
        buyAuto.onclick = function () {
            if (score >= autoCost) {
                score -= autoCost;
                auto++;
                autoCost = Math.floor(autoCost * 1.75);

                localStorage.setItem("score", score);
                localStorage.setItem("auto", auto);
                localStorage.setItem("autoCost", autoCost);

                button.textContent = score;
                buyAuto.textContent = "Auto-clicker (" + autoCost + " points)";
                autoInfo.textContent = "You have " + auto + " auto-clickers";

                if (!autoActive) startAutoClicker();  // <-- now works
            }

        };

        saveBtn.onclick = function () {
            document.getElementById("savetxt").textContent = "Game Saved!";
            localStorage.setItem("score", score);
            localStorage.setItem("level", level);
            localStorage.setItem("auto", auto);
            localStorage.setItem("autoCost", autoCost);
            localStorage.setItem("generators", generators);
            localStorage.setItem("generatorCost", generatorCost);
            localStorage.setItem("factories", factories);
            localStorage.setItem("factoryCost", factoryCost);
            localStorage.setItem("reactors", reactors);
            localStorage.setItem("reactorCost", reactorCost);
            localStorage.setItem("grandmas", grandmas);
            localStorage.setItem("grandmaCost", grandmaCost);
            setTimeout(afterPause, 1000); // 1000 milliseconds = 1 second
            function afterPause() {
                document.getElementById("savetxt").textContent = "";
            }
        };

        button.onclick = function () {
            clickSound.currentTime = 0;
            clickSound.play();

            score += level * prestigeMult;
            clicks += 1;
            button.textContent = score;
            localStorage.setItem("score", score);
            localStorage.setItem("clicks", clicks);
            totclk.textContent = "total clicks: " + clicks;

            // spawn particle at mouse position
            document.addEventListener("click", (e) => {
                spawnParticle(e.clientX, e.clientY);
            });

            checkAchivements();
        };
        input.oninput = function () {
            amount = parseInt(input.value, 10) || 1; // default = 1
            let cost = level * amount * 100;
            costDisplay.textContent = "Cost for next level: " + cost;
            checkAchivements();
        };

        levelBtn.onclick = function () {

            let amount = parseInt(input.value, 10);   // how many levels player wants
            let cost = level * amount * 100;           // price calculation

            if (score >= cost) {
                score -= cost;
                level += amount;

                button.textContent = score;
                display.textContent = "Level: " + level;
                let nextAmount = parseInt(input.value, 10) || 1;
                let nextCost = level * nextAmount * 100; // controll cost display after level up
                costDisplay.textContent = "Cost for next level: " + nextCost;
                localStorage.setItem("score", score);
                localStorage.setItem("level", level);
                checkAchivements();
            }
        };

        resetBtn.onclick = function () {
            if (!confirm("Are you SURE you want to reset?")) return;

            score = 0;
            level = 1;
            auto = 0;
            autoCost = 500;
            generators = 0;
            generatorCost = 1000;
            factories = 0;
            factoryCost = 5000;
            reactors = 0;
            reactorCost = 25000;
            grandmas = 0;
            grandmaCost = 10000000;
            clicks = 0;

            localStorage.clear();

            button.textContent = score;
            display.textContent = "Level: " + level;

            let amount = parseInt(input.value, 10) || 1;
            costDisplay.textContent = "Cost for next level: " + (level * amount * 100);

            buyAuto.textContent = "Auto-clicker (" + autoCost + " points)";
            autoInfo.textContent = "You have " + auto + " auto-clickers";
            genBtn.textContent = "Generator (" + generatorCost + " points)";
            genTxt.textContent = "You have " + generators + " generators";
            facBtn.textContent = "Factory (" + factoryCost + " points)";
            facTxt.textContent = "You have " + factories + " factories";
            reactBtn.textContent = "Quantum Reactor " + reactorCost + " points";
            reactTxt.textContent = "You have " + reactors + " reactors";
            grandmaBtn.textContent = "RIP Grandma... (" + grandmaCost + " points)";
            grandmaTxt.textContent = "You have " + grandmas + " Grandmas";


        };

        function startAutoClicker() {
            if (autoActive) return; // don't start twice
            autoActive = true; // turn system on correctly
            setInterval(() => {
                let totalGain = 0;

                totalGain += (auto + autoBoost) * 1;
                totalGain += generators * 5;
                totalGain += factories * 25;
                totalGain += reactors * 100;
                totalGain += grandmas * 1000000;

                if (totalGain > 0) {
                    score += totalGain;
                    button.textContent = score;
                    localStorage.setItem("score", score);
                }
            }, 1000);
        }
        function checkAchivements() {

            if (clicks >= 1) {
                document.getElementById("click").textContent = "1 click down...";
            }
            if (clicks >= 100) {
                document.getElementById("100clk").textContent = "100 clicks!";
            }
            if (clicks >= 1000) {
                document.getElementById("1000clk").textContent = "what comes after 999? 1000!!!!!!!!!!!!!!!";
            }
            if (clicks >= 100000) {
                document.getElementById("100000clk").textContent = "click-aholic";
            }
            if (auto >= 1) {
                document.getElementById("1auto").textContent = "some automating going on";
            }
            if (auto >= 10) {
                document.getElementById("10auto").textContent = "getting serious with the auto-clickers";
            }
            if (auto >= 100) {
                document.getElementById("100auto").textContent = "OH MY LORD";
            }
            if (generators >= 1) {
                document.getElementById("1gen").textContent = "GENERATING TEXT... SUCSESS.";
            }
            if (generators >= 10) {
                document.getElementById("10gen").textContent = "powering up...";
            }
            if (generators >= 100) {
                document.getElementById("100gen").textContent = "ENERGY OVERLOAD!!!";
            }
            if (factories >= 1) {
                document.getElementById("1fac").textContent = "factory is opperational";
            }
            if (factories >= 10) {
                document.getElementById("10fac").textContent = "huge production";
            }
            if (factories >= 100) {
                document.getElementById("100fac").textContent = "earth = factory now";
            }
            if (reactors >= 1) {
                document.getElementById("1reactor").textContent = "quantumized points";
            }
            if (reactors >= 10) {
                document.getElementById("10reactor").textContent = "quantumized points x10";
            }
            if (reactors >= 100) {
                document.getElementById("100reactor").textContent = "quantumized points OVERLOAD!!!";
            }
            if (grandmas >= 1) {
                document.getElementById("1grandma").textContent = "RIP Grandma";
            }
            if (grandmas >= 10) {
                document.getElementById("10grandma").textContent = "Rip Grandma x10";
            }
            if (grandmas >= 100) {
                document.getElementById("100grandma").textContent = "grandma was found in heaven";
            }
        };
        function giveDailyReward() {
            let today = new Date().toDateString();
            let lastReward = localStorage.getItem("lastRewardDate");

            if (lastReward !== today) {
                // Give reward only once per day
                score += 500;

                // Update UI
                button.textContent = score;

                // Save
                localStorage.setItem("score", score);
                localStorage.setItem("lastRewardDate", today);

                // Show popup
                showDailyPopup();
            }
        }
        function showDailyPopup() {
            const pop = document.createElement("div");
            pop.textContent = "üéÅ Daily Reward: +500 Points!";
            pop.style.position = "fixed";
            pop.style.top = "20px";
            pop.style.left = "50%";
            pop.style.transform = "translateX(-50%)";
            pop.style.background = "#4CAF50";
            pop.style.color = "white";
            pop.style.padding = "15px 25px";
            pop.style.borderRadius = "12px";
            pop.style.fontSize = "20px";
            pop.style.boxShadow = "0 0 15px rgba(0,0,0,0.3)";
            pop.style.zIndex = "9999";
            pop.style.opacity = "1";
            pop.style.transition = "opacity 1s ease";

            document.body.appendChild(pop);

            setTimeout(() => {
                pop.style.opacity = "0";
                setTimeout(() => pop.remove(), 1000);
            }, 2000);
        }

        if (auto > 0 || generators > 0 || factories > 0 || reactors > 0 || grandmas > 0) {
            startAutoClicker();
        }
        
        function checkOfflineEarnings() {
            let saved = localStorage.getItem("lastOnline");
            if (!saved) return;

            let msAway = Date.now() - parseInt(saved);
            let secondsAway = Math.floor(msAway / 1000);

            // Offline rate = your upgrades + prestige multiplier
            let offlineRate = (1 + upgrades) * prestigeMult;

            let earned = secondsAway * offlineRate;
            score += earned;

            alert("You were away for " + secondsAway +
                "s and earned " + earned + " points!");
            let mybtn = document.getElementById("myButton").textContent
            mybtn.textContent += earned

            
        }

        checkOfflineEarnings();
        function spawnParticle(x, y, text = "+1") {
            const p = document.createElement("div");
            p.classList.add("particle");
            p.textContent = text;

            p.style.left = x + "px";
            p.style.top = y + "px";

            //document.getElementById("particle-container").appendChild(p);

            setTimeout(() => p.remove(), 800);
        }

        function playClickSound() {
            document.getElementById("clickSound").play();
        }
        document.getElementById("mainCSS").addEventListener("error", function () {
            const err = document.createElement("div");
            err.textContent = "‚ö†Ô∏è ERROR 404: btnclk.css failed to load! currently using temporay fix.";
            err.style.position = "fixed";
            err.style.top = "20px";
            err.style.left = "50%";
            err.style.transform = "translateX(-50%)";
            err.style.background = "#ff4444";
            err.style.color = "white";
            err.style.padding = "15px 25px";
            err.style.borderRadius = "10px";
            err.style.fontSize = "18px";
            err.style.boxShadow = "0 0 10px rgba(0,0,0,0.3)";
            err.style.zIndex = "99999";

            document.body.appendChild(err);

            setTimeout(() => {
                err.style.transition = "opacity 1s";
                err.style.opacity = "0";
                setTimeout(() => err.remove(), 1000);
            }, 2500);
        });
        function calculatePrestigeRequirement() {
            return 10000 * (prestigeLevel + 1);
        }

        function prestige() {
            if (score >= calculatePrestigeRequirement()) {

                prestigeLevel++;
                prestigeMult = 1 + prestigeLevel * 0.5;  // each prestige = +50%

                // RESET EVERYTHING EXCEPT PRESTIGE
                score = 0;
                upgrades = 0;

                updateScore();
                updatePrestigeUI();
            }
        }

        function updatePrestigeUI() {
            document.getElementById("prestigeInfo").textContent =
                "Prestige Multiplier: x" + prestigeMult;
            document.getElementById("prestigeBtn").textContent =
                "Prestige (Requires " + calculatePrestigeRequirement() + ")";
        }

        // Modify click function
        function addPoint() {
            animateButton();
            playClickSound();
            score += (1 + upgrades) * prestigeMult;
            updateScore();
        }
        let lastOnline = Date.now();

        window.addEventListener("beforeunload", () => {
            localStorage.setItem("lastOnline", Date.now());
            localStorage.setItem("score", score);
        });
        checkAchivements(); // Check achievements on load
        giveDailyReward(); // Give daily reward if applicable
    </script>

</body>

</html>