<!-- welcome to button clicker! my very first game with huge logic, from errors to css then sounds and popups,
even storage! i just want to give a huge shout out to all theese who helped me:
 GitHub Copilot, generating text for me to make things quick
 ChatGPT, for helping me building the base logic and give out ideas, even if it makes errors, im not mad
 DevTools on Chrome, helping me find bugs, and at the same time giving me the chance to learn and resist
 stack overflow, helping me fix bugs when others were unavailable
i truly recomend using these, especialy if you are a begginer like me.
thank you for reading this comment, happy viewing (or hacking)!-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta>
    <title>button clicker (beta)</title>
    <link id="mainCSS" rel="stylesheet" href="./btnclk.css">
    <style>
        body {
            background-color: rgb(207, 255, 253);
            color: rgb(0, 0, 0);
        }
    </style>
</head>

<body>
    <!-- prepare audio -->
    <audio id="clickSound" src="./clk.mp3"></audio>
    <!-- following div is used to test if css loaded -->
    <div id="css-test-element" style="display:none;"></div>
    <div id="cssError">
        <div class="errBox">
            <h1>‚ö†Ô∏è CSS Failed to Load</h1>
            <p>The page will not load without the stylesheet. please make sure that you downloaded the css file.</p>
            <p>ERROR CODE 404: FILE_NOT_FOUND</p>
            <button id="continueBtn">atempt to check for CSS</button>
            <button id="force">force check for css [Android only]</button>
            <button id="rld" onclick="location.reload();">reload page</button>
            <button id="redir" onclick="window.location.href='err.html'">go to error type</button>
            <button id="dwnld">download full CSS</button>
            <p id="atmp"></p>
        </div>
    </div>

    <!-- following script controlls css eror screen -->
    <script>
        const continueBtn = document.getElementById("continueBtn");
        const atmpText = document.getElementById("atmp");
        const dwnldBtn = document.getElementById("dwnld");
        const style = document.getElementById("download");
        const frcscheck = document.getElementById("force");
        const redir = document.getElementById("redir")
        const fallbackCSS = `
    #css-test-element {
    width: 10px;
}

#myButton {
    border-radius: 0 !important;
    margin-left: 100px;
    width: auto !important;
    height: auto !important;
    padding: 1px 10px !important;
    font-size: 14px !important;
    transition: 150ms !important;

}

#myButton:hover {
    border-radius: 0 !important;
    width: auto !important;
    height: auto !important;
    padding: 5px 15px !important;
    font-size: 19px !important;
    transition: 150ms !important;
}

#myButton:active {
    /* main code */
    border-radius: 0 !important;
    width: auto !important;
    height: auto !important;
    padding: 3px 12px !important;
    font-size: 14px !important;
    transition: 150ms !important;
}

#particle-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}

.particle {
    position: absolute;
    color: white;
    font-weight: bold;
    text-shadow: 0 0 8px purple;
    animation: floatUp 0.8s ease-out forwards;
}

@keyframes floatUp {
    from {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    to {
        opacity: 0;
        transform: translateY(-50px) scale(1.5);
    }
}

#soundErrorPopup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

#soundErrorPopup .popup-content {
    background: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    width: 300px;
}

#soundErrorPopup button {
    margin-top: 10px;
    padding: 10px 20px;
}

#particleCanvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}
#settings {
    position: fixed;
    top: 10px;
    right: 10px;
    font-size: 24px;
    background: none;
    border: none;
    cursor: pointer;
}
#settingsMenu {
    background: white;
    margin-left: 400px;
    padding: 20px;
    border: 2px solid black;
    border-radius: 10px;
}
`;


        dwnldBtn.onclick = function () {
            btn = document.getElementById("continueBtn");
            const style = document.createElement("style");
            style.textContent = fallbackCSS;
            document.head.appendChild(style);
            btn.textContent = "continiue to page";
            atmpText.textContent = "‚úÖ CSS applied via internal fallback. please click 'continiue to page' to continiue.";
        };

        continueBtn.onclick = function () {
            const link = document.getElementById("mainCSS");
            link.href = "./btnclk.css?" + new Date().getTime(); // Force reload by appending timestamp

            // Check if CSS loads after a short delay
            setTimeout(() => {
                const test = getComputedStyle(document.getElementById("css-test-element")).width;
                if (test === "10px") {
                    // CSS loaded successfully
                    document.getElementById("cssError").style.display = "none";
                } else {
                    atmpText.textContent = "‚ö†Ô∏è CSS still failed to load. Please check your file location.";
                    redir.style.display = "flex";
                }

            }, 1000); // 1 second delay
        };
        frcscheck.onclick = function () {
            if (!confirm("Are you sure you want to continiue? note that this feature only works on Android")) return;
            const link = document.getElementById("mainCSS");
            link.href = "/storage/emulated/0/idx/btnclk.css"
            setTimeout(() => {
                const test = getComputedStyle(document.getElementById("css-test-element")).width;
                if (test === "10px") {
                    // CSS loaded successfully
                    document.getElementById("cssError").style.display = "none";
                } else {
                    atmpText.textContent = "‚ö†Ô∏è CSS still failed to load. Please check your file location.";
                    redir.style.display = "flex"; ∆í
                }

            }, 1000); // 1 second delay
        }
    </script>

    <style>
        /* Hidden by default */
        #cssError {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
            color: black;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 999999;
            font-family: Arial, sans-serif;
        }

        #cssError .errBox {
            max-width: 500px;
            padding: 20px;
        }

        #continueBtn {
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }

        #dwnld {
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }

        #rld {
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }

        #soundErrorPopup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        #soundErrorPopup .popup-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            width: 300px;
        }

        #soundErrorPopup button {
            margin-top: 10px;
            padding: 10px 20px;
        }

        #force {
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }

        #redir {
            text-align: center;
            align-items: center;
            display: none;
            margin-top: 20px;
            padding: 10px 25px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>

    <script>
        window.onload = function () {

            const test = getComputedStyle(document.getElementById("css-test-element")).width;

            if (test !== "10px") {
                // CSS didn't load
                document.getElementById("cssError").style.display = "flex";
            }
        };
    </script>
    <!-- main setup -->
    <h1>button clicker (beta)</h1>
    <button id="settings">‚öô SETTINGS</button>
    <div class="sett" id="settingsMenu" style="display:none;">
        <h2>Settings</h2>
        <button id="resetBtn">RESET</button>
        <button id="save">Save Game</button>
        <button id="dark">Dark Mode</button>
        <button id="err" onclick="window.location.href='err.html'">redirect to errors</button>
        <p id="savetxt"></p>
    </div>
    <div style="margin-bottom: 20px">
        <canvas id="particleCanvas"></canvas>
        <button id="myButton">0</button>
    </div>
    <div>
        <input id="myInput" type="number" value="1" min="0" pattern="[1-9]" placeholder="use to level up" />
        <button id="ok">&larr;level up that many times</button>
        <div id="particleContainer"></div>
        <p>click = + [how many levels you have] points!</p>
    </div>
    <div>
        <p id="levelDisplay">Level: 1</p>
    </div>
    <p id="cost">cost for next level: 100</p>
    <p id="aford">yes or nope</p>

    <!-- Source - https://stackoverflow.com/a/3926750
    Posted by hairbo, modified by community. See post 'Timeline' for change history
    Retrieved 2025-11-29, License - CC BY-SA 3.0 -->
    <noscript>
        <style type="text/css">
            .pagecontainer {
                display: none;
            }
        </style>
        <div class="noscriptmsg">
            javascript is not supported by your browser or is disabled.
            <p>ERROR CODE: SCRIPT_NOT_SUPPORTED</p>
        </div>
    </noscript>
    <!--end of source-->
    <!--extra gui-->
    <p id="totclk">total clicks: 0</p>
    <button id="prestigeBtn" onclick="prestige()" title="prestige is still in progress, please do not use">Prestige (Requires 10,000,000,000 (10 billion) points)</button>
    <div id="prestigeInfo" title="prestige is still in progress, please do not use">Prestige Multiplier: x1</div>
    <!-- upgrades -->
    <h2>UPGRADES!!!</h2>
    <p>(tip: hover your mouse pointer over a buttton for the details of the upgrade)</p>
    <button id="clicker" title="each auto-cliker clicks 1 point per second">auto-clicker (500 points per
        clicker)</button>
    <p id="clickertxt">you have 0 auto-clickers</p>

    <button id="genBtn" title="each genrator produces 5 points per second">Generator (1000 points)</button>
    <p id="genTxt">You have 0 generators</p>

    <button id="facBtn" title="each factory makes 25 points per second">Factory (5000 points)</button>
    <p id="facTxt">You have 0 factories</p>

    <button id="reactBtn" title="each Quantum Reactor fuses 100 points per second">Quantum Reactor (25000
        points)</button>
    <p id="reactTxt">You have 0 reactors</p>

    <button id="alcam" title="each alchemy lab transmutes 10000 points per second">Alchemy Lab (100000 points)</button>
    <p id="alctxt">You have 0 alchemy labs</p>

    <button id="grandma"
        title="to remember her loss, each grandma bakes 1 million points per second... she shall not be forgotten">RIP
        Grandma... (10 million points)</button>
    <p id="grandmatxt">You have 0 Grandmas</p>

    <style>
        #grandma {
            box-shadow: 0 0 12px 4px rgba(150, 80, 255, 0.4);
            border: 1px solid rgb(180, 130, 255);
            transition: 1s;
        }

        #grandma:hover {
            box-shadow: 0 0 20px 6px rgba(180, 120, 255, 0.7);
        }
    </style>
    <!-- achievements -->
    <h2>achievements (scroll down)</h2>
    <p id="click">???</p>
    <p id="100clk">???</p>
    <p id="1000clk">???</p>
    <p id="50000clk">???</p>
    <p id="1auto">???</p>
    <p id="10auto">???</p>
    <p id="50auto">???</p>
    <p id="1gen">???</p>
    <p id="10gen">???</p>
    <p id="50gen">???</p>
    <p id="1fac">???</p>
    <p id="10fac">???</p>
    <p id="50fac">???</p>
    <p id="1reactor">???</p>
    <p id="10reactor">???</p>
    <p id="50reactor">???</p>
    <p id="1alcam">???</p>
    <p id="10alcam">???</p>
    <p id="50alcam">???</p>
    <p id="1grandma">???</p>
    <p id="10grandma">???</p>
    <p id="50grandma">???</p>
    <!-- main code -->
    <script>
        // unlock sound play
        const clickSound = document.getElementById("clickSound");
        clickSound.volume = 0.4;
        document.body.addEventListener("mousedown", () => {
            clickSound.play().catch(() => { });
        }, { once: true });
        clickSound.addEventListener("error", () => {
            showMissingSoundPopup();
        });

        // preapare canvas
        const canvas = document.getElementById("particleCanvas");
        const ctx = canvas.getContext("2d");

        let particles = [];

        // load stored data
        let score = Number(localStorage.getItem("score")) || 0;
        let cost = Number(localStorage.getItem("cost")) || 100;
        let clicks = Number(localStorage.getItem("clicks")) || 0;
        let level = parseInt(localStorage.getItem("level")) || 1;
        let auto = Number(localStorage.getItem("auto")) || 0;
        let autoCost = Number(localStorage.getItem("autoCost")) || 500;
        let autoActive = false;
        let generators = Number(localStorage.getItem("generators")) || 0;
        let generatorCost = Number(localStorage.getItem("generatorCost")) || 1000;
        let factories = Number(localStorage.getItem("factories")) || 0;
        let factoryCost = Number(localStorage.getItem("factoryCost")) || 5000;
        let reactors = Number(localStorage.getItem("reactors")) || 0;
        let reactorCost = Number(localStorage.getItem("reactorCost")) || 25000;
        let grandmas = Number(localStorage.getItem("grandmas")) || 0;
        let grandmaCost = Number(localStorage.getItem("grandmaCost")) || 10000000;
        let alcam = Number(localStorage.getItem("alcam")) || 0;
        let alcamCost = Number(localStorage.getItem("alcamCost")) || 100000;
        let prestigelvl = Number(localStorage.getItem("prestigeBtn")) || 0;
        let prestigeMult = Number(localStorage.getItem("prestigeInfo")) || 1;
        let upgrades = (auto * 1) + (generators * 5) + (factories * 25) + (reactors * 100) + (alcam * 10000) + (grandmas * 1000000);
        let autoBoost = 0;

        // Prevent NaN bug from breaking game
        if (isNaN(score)) score = 0;
        if (isNaN(level)) level = 1;
        if (isNaN(auto)) auto = 0;
        if (isNaN(generators)) generators = 0;
        if (isNaN(factories)) factories = 0;
        if (isNaN(reactors)) reactors = 0;
        if (isNaN(grandmas)) grandmas = 0;


        const button = document.getElementById("myButton");
        const levelBtn = document.getElementById("ok");
        const input = document.getElementById("myInput");
        const display = document.getElementById("levelDisplay");
        const costDisplay = document.getElementById("cost");
        const resetBtn = document.getElementById("resetBtn");
        const saveBtn = document.getElementById("save");
        const buyAuto = document.getElementById("clicker");
        const autoInfo = document.getElementById("clickertxt");
        const genBtn = document.getElementById("genBtn");
        const genTxt = document.getElementById("genTxt");
        const facBtn = document.getElementById("facBtn");
        const facTxt = document.getElementById("facTxt");
        const reactBtn = document.getElementById("reactBtn");
        const reactTxt = document.getElementById("reactTxt");
        const grandmaBtn = document.getElementById("grandma");
        const grandmaTxt = document.getElementById("grandmatxt");
        const totclk = document.getElementById("totclk");
        const settingsBtn = document.getElementById("settings");
        const settingsMenu = document.getElementById("settingsMenu");
        const prestigeBtn = document.getElementById("prestigeBtn");
        const prestigeInfo = document.getElementById("prestigeInfo");
        const afordable = document.getElementById("aford");
        const darkModeBtn = document.getElementById("dark");
        const alcamBtn = document.getElementById("alcam");
        const alcamTxt = document.getElementById("alctxt");
        button.textContent = score;
        totclk.textContent = "total clicks: " + clicks;
        afordable.textContent = (score >= cost) ? "afordable" : "not afordable";

        let amount = parseInt(input.value, 10) || 1;
        costDisplay.textContent = "Cost for next level: " + (level * amount * 100);
        button.textContent = score;
        display.textContent = "Level: " + level;
        button.textContent = score;
        buyAuto.textContent = "Auto-clicker (" + autoCost + " points)";
        autoInfo.textContent = "You have " + auto + " auto-clickers";
        genBtn.textContent = "Generator (" + generatorCost + " points)";
        facBtn.textContent = "Factory (" + factoryCost + " points)";
        reactBtn.textContent = "Quantum Reactor (" + reactorCost + " points)";
        genTxt.textContent = "You have " + generators + " generators";
        facTxt.textContent = "You have " + factories + " factories";
        reactTxt.textContent = "You have " + reactors + " reactors";
        grandmaBtn.textContent = "RIP Grandma... (" + grandmaCost + " points)";
        grandmaTxt.textContent = "You have " + grandmas + " Grandmas";
        alcamBtn.textContent = "Alchemy Lab (" + alcamCost + " points)";
        alcamTxt.textContent = "You have " + alcam + " alchemy labs";

        darkModeBtn.onclick = function () {
            if (document.body.style.backgroundColor === "rgb(207, 255, 253)") {
                document.body.style.backgroundColor = "rgb(50, 50, 50)";
                document.body.style.color = "rgb(220, 220, 220)";
            } else {
                document.body.style.backgroundColor = "rgb(207, 255, 253)";
                document.body.style.color = "rgb(0, 0, 0)";
            }
        };

        settingsBtn.onclick = function () {
            if (settingsMenu.style.display === "none") {
                settingsMenu.style.display = "block";
            } else {
                settingsMenu.style.display = "none";
            }
        };

        grandmaBtn.onclick = function () {
            if (score >= grandmaCost) {
                score -= grandmaCost;
                grandmas++;

                grandmaCost = Math.floor(grandmaCost * 1.75);

                localStorage.setItem("score", score);
                localStorage.setItem("grandmas", grandmas);
                localStorage.setItem("grandmaCost", grandmaCost);

                button.textContent = score;
                grandmaBtn.textContent = "RIP Grandma... (" + grandmaCost + " points)";
                grandmaTxt.textContent = "You have " + grandmas + " Grandmas";
                checkAchivements();
            }
        };

        genBtn.onclick = function () {
            if (score >= generatorCost) {
                score -= generatorCost;
                generators++;

                generatorCost = Math.floor(generatorCost * 1.5);

                localStorage.setItem("score", score);
                localStorage.setItem("generators", generators);
                localStorage.setItem("generatorCost", generatorCost);

                button.textContent = score;
                genBtn.textContent = "Generator (" + generatorCost + " points)";
                genTxt.textContent = "You have " + generators + " generators";
                checkAchivements();
            }
        };

        facBtn.onclick = function () {
            if (score >= factoryCost) {
                score -= factoryCost;
                factories++;

                factoryCost = Math.floor(factoryCost * 1.6);

                localStorage.setItem("score", score);
                localStorage.setItem("factories", factories);
                localStorage.setItem("factoryCost", factoryCost);

                button.textContent = score;
                facBtn.textContent = "Factory (" + factoryCost + " points)";
                facTxt.textContent = "You have " + factories + " factories";
                checkAchivements();
            }
        };
        reactBtn.onclick = function () {
            if (score >= reactorCost) {
                score -= reactorCost;
                reactors++;

                reactorCost = Math.floor(reactorCost * 1.7);

                localStorage.setItem("score", score);
                localStorage.setItem("reactors", reactors);
                localStorage.setItem("reactorCost", reactorCost);

                button.textContent = score;
                reactBtn.textContent = "Quantum Reactor (" + reactorCost + " points)";
                reactTxt.textContent = "You have " + reactors + " reactors";
                checkAchivements();
            }
        };
        buyAuto.onclick = function () {
            if (score >= autoCost) {
                score -= autoCost;
                auto++;
                autoCost = Math.floor(autoCost * 1.75);

                localStorage.setItem("score", score);
                localStorage.setItem("auto", auto);
                localStorage.setItem("autoCost", autoCost);

                button.textContent = score;
                buyAuto.textContent = "Auto-clicker (" + autoCost + " points)";
                autoInfo.textContent = "You have " + auto + " auto-clickers";

                if (!autoActive) startAutoClicker();  // <-- now works
            }

        };

        alcamBtn.onclick = function () {
            if (score >= alcamCost) {
                score -= alcamCost;
                alcam++;
                alcamCost = Math.floor(alcamCost * 1.8);

                localStorage.setItem("score", score);
                localStorage.setItem("alcam", alcam);
                localStorage.setItem("alcamCost", alcamCost);

                button.textContent = score;
                alcamBtn.textContent = "Alchemy Lab (" + alcamCost + " points)";
                alcamTxt.textContent = "You have " + alcam + " alchemy labs";

                if (!autoActive) startAutoClicker();  // <-- now works
            }
        }

        saveBtn.onclick = function () {
            document.getElementById("savetxt").textContent = "Game Saved!";
            localStorage.setItem("score", score);
            localStorage.setItem("level", level);
            localStorage.setItem("auto", auto);
            localStorage.setItem("autoCost", autoCost);
            localStorage.setItem("generators", generators);
            localStorage.setItem("generatorCost", generatorCost);
            localStorage.setItem("factories", factories);
            localStorage.setItem("factoryCost", factoryCost);
            localStorage.setItem("reactors", reactors);
            localStorage.setItem("reactorCost", reactorCost);
            localStorage.setItem("grandmas", grandmas);
            localStorage.setItem("grandmaCost", grandmaCost);
            setTimeout(afterPause, 1000); // 1000 milliseconds = 1 second
            function afterPause() {
                document.getElementById("savetxt").textContent = "";
            }
        };

        button.onclick = function () {
            // define variables
            let cost = level * amount * 100;

            // play click sound
            clickSound.currentTime = 0;
            clickSound.play();

            // change button color randomly
            const r = Math.floor(Math.random() * 256);
            const g = Math.floor(Math.random() * 256);
            const b = Math.floor(Math.random() * 256);
            button.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
            button.style.boxShadow = `0 0 20px rgb(${r}, ${g}, ${b})`;

            // main click logic
            score += level * prestigeMult;
            clicks += 1;
            button.textContent = score;
            localStorage.setItem("score", score);
            localStorage.setItem("clicks", clicks);
            // set new total clicks
            totclk.textContent = "total clicks: " + clicks;

            // check if you can afford next level
            afordable.textContent = (score >= cost) ? "afordable" : "not afordable";
        };
        input.oninput = function () {
            amount = parseInt(input.value, 10) || 1; // default = 1
            let cost = level * amount * 100;
            costDisplay.textContent = "Cost for next level: " + cost;
            afordable.textContent = (score >= cost) ? "afordable" : "not afordable";
            checkAchivements();
        };

        levelBtn.onclick = function () {

            let amount = parseInt(input.value, 10);   // how many levels player wants
            let cost = level * amount * 100;           // price calculation

            if (score >= cost) {
                score -= cost;
                level += amount;

                button.textContent = score;
                display.textContent = "Level: " + level;
                let nextAmount = parseInt(input.value, 10) || 1;
                let nextCost = level * nextAmount * 100; // controll cost display after level up
                costDisplay.textContent = "Cost for next level: " + nextCost;
                localStorage.setItem("score", score);
                localStorage.setItem("level", level);
                checkAchivements();
            }
        };

        resetBtn.onclick = function () {
            if (!confirm("Are you SURE you want to reset?")) return;

            score = 0;
            level = 1;
            auto = 0;
            autoCost = 500;
            generators = 0;
            generatorCost = 1000;
            factories = 0;
            factoryCost = 5000;
            reactors = 0;
            reactorCost = 25000;
            grandmas = 0;
            grandmaCost = 10000000;
            clicks = 0;

            localStorage.clear();

            button.textContent = score;
            display.textContent = "Level: " + level;

            let amount = parseInt(input.value, 10) || 1;
            costDisplay.textContent = "Cost for next level: " + (level * amount * 100);

            buyAuto.textContent = "Auto-clicker (" + autoCost + " points)";
            autoInfo.textContent = "You have " + auto + " auto-clickers";
            genBtn.textContent = "Generator (" + generatorCost + " points)";
            genTxt.textContent = "You have " + generators + " generators";
            facBtn.textContent = "Factory (" + factoryCost + " points)";
            facTxt.textContent = "You have " + factories + " factories";
            reactBtn.textContent = "Quantum Reactor " + reactorCost + " points";
            reactTxt.textContent = "You have " + reactors + " reactors";
            grandmaBtn.textContent = "RIP Grandma... (" + grandmaCost + " points)";
            grandmaTxt.textContent = "You have " + grandmas + " Grandmas";


        };

        function startAutoClicker() {
            if (autoActive) return; // don't start twice
            autoActive = true; // turn system on correctly
            setInterval(() => {
                let totalGain = 0;

                totalGain += (auto + autoBoost) * 1;
                totalGain += generators * 5;
                totalGain += factories * 25;
                totalGain += reactors * 100;
                totalGain += alcam * 10000;
                totalGain += grandmas * 1000000;

                if (totalGain > 0) {
                    score += totalGain;
                    button.textContent = score;
                    localStorage.setItem("score", score);
                }
            }, 1000);
        }
        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles = particles.filter(p => p.life > 0);

            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.life--;

                ctx.globalAlpha = p.life / 30;
                ctx.fillStyle = "white";
                ctx.beginPath();
                ctx.arc(p.x, p.y, 4, 0, Math.PI * 2);
                ctx.fill();
            });

            requestAnimationFrame(animateParticles);
        }

        animateParticles();

        function checkAchivements() {

            if (clicks >= 1) {
                document.getElementById("click").textContent = "1 click down...";
            }
            if (clicks >= 100) {
                document.getElementById("100clk").textContent = "100 clicks!";
            }
            if (clicks >= 1000) {
                document.getElementById("1000clk").textContent = "what comes after 999? 1000!!!!!!!!!!!!!!!";
            }
            if (clicks >= 50000) {
                document.getElementById("50000clk").textContent = "click-aholic";
            }
            if (auto >= 1) {
                document.getElementById("1auto").textContent = "some automating going on";
            }
            if (auto >= 10) {
                document.getElementById("10auto").textContent = "getting serious with the auto-clickers";
            }
            if (auto >= 50) {
                document.getElementById("50auto").textContent = "OH MY LORD";
            }
            if (generators >= 1) {
                document.getElementById("1gen").textContent = "GENERATING TEXT... SUCSESS.";
            }
            if (generators >= 10) {
                document.getElementById("10gen").textContent = "powering up...";
            }
            if (generators >= 50) {
                document.getElementById("50gen").textContent = "ENERGY OVERLOAD!!!";
            }
            if (factories >= 1) {
                document.getElementById("1fac").textContent = "factory is opperational";
            }
            if (factories >= 10) {
                document.getElementById("10fac").textContent = "huge production";
            }
            if (factories >= 50) {
                document.getElementById("50fac").textContent = "earth = factory now";
            }
            if (reactors >= 1) {
                document.getElementById("1reactor").textContent = "quantumized points";
            }
            if (reactors >= 10) {
                document.getElementById("10reactor").textContent = "quantumized points (why does this make me think about cookies?)";
            }
            if (reactors >= 50) {
                document.getElementById("50reactor").textContent = "quantumized points OVERLOAD!!!";
            }
            if (alcam >= 1) {
                document.getElementById("1alcam").textContent = "alchemy is real";
            }
            if (alcam >= 10) {
                document.getElementById("10alcam").textContent = "ten labs, are u serious?";
            }
            if (alcam >= 50) {
                document.getElementById("50alcam").textContent = "philosophic clicks?";
            }
            if (grandmas >= 1) {
                document.getElementById("1grandma").textContent = "RIP Grandma";
            }
            if (grandmas >= 10) {
                document.getElementById("10grandma").textContent = "raining cicks (thanks grandma)";
            }
            if (grandmas >= 50) {
                document.getElementById("50grandma").textContent = "heavanly clicks";
            }
        };
        function giveDailyReward() {
            let today = new Date().toDateString();
            let lastReward = localStorage.getItem("lastRewardDate");

            if (lastReward !== today) {
                // Give reward only once per day
                score += 500;

                // Update UI
                button.textContent = score;

                // Save
                localStorage.setItem("score", score);
                localStorage.setItem("lastRewardDate", today);

                // Show popup
                showDailyPopup();
            }
        }
        function showDailyPopup() {
            const pop = document.createElement("div");
            pop.textContent = "üéÅ Daily Reward: +500 Points!";
            pop.style.position = "fixed";
            pop.style.top = "20px";
            pop.style.left = "50%";
            pop.style.transform = "translateX(-50%)";
            pop.style.background = "#4CAF50";
            pop.style.color = "white";
            pop.style.padding = "15px 25px";
            pop.style.borderRadius = "12px";
            pop.style.fontSize = "20px";
            pop.style.boxShadow = "0 0 15px rgba(0,0,0,0.3)";
            pop.style.zIndex = "9999";
            pop.style.opacity = "1";
            pop.style.transition = "opacity 1s ease";

            document.body.appendChild(pop);

            setTimeout(() => {
                pop.style.opacity = "0";
                setTimeout(() => pop.remove(), 1000);
            }, 2000);
        }

        if (auto > 0 || generators > 0 || factories > 0 || reactors > 0 || grandmas > 0) {
            startAutoClicker();
        }

        function checkOfflineEarnings() {
            let saved = localStorage.getItem("lastOnline");
            if (!saved) return;

            let msAway = Date.now() - parseInt(saved);
            let secondsAway = Math.floor(msAway / 1000);

            // Offline rate = your upgrades + prestige multiplier
            let offlineRate = (1 + upgrades) * prestigeMult;

            let earned = secondsAway * offlineRate;
            score += earned;

            alert("You were away for " + secondsAway +
                "s and earned " + earned + " points!");
            let mybtn = document.getElementById("myButton").textContent
            mybtn.textContent += earned


        }

        checkOfflineEarnings();

        function spawnParticles(x, y) {
            for (let i = 0; i < 12; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 4,
                    vy: (Math.random() - 0.5) * 4,
                    life: 30
                });
            }
        }


        function playClickSound() {
            document.getElementById("clickSound").play();
        }
        document.getElementById("mainCSS").addEventListener("error", function () {
            const err = document.createElement("div");
            err.textContent = "‚ö†Ô∏è ERROR 404: btnclk.css failed to load! currently using temporay fix.";
            err.style.position = "fixed";
            err.style.top = "20px";
            err.style.left = "50%";
            err.style.transform = "translateX(-50%)";
            err.style.background = "#ff4444";
            err.style.color = "white";
            err.style.padding = "15px 25px";
            err.style.borderRadius = "10px";
            err.style.fontSize = "18px";
            err.style.boxShadow = "0 0 10px rgba(0,0,0,0.3)";
            err.style.zIndex = "99999";

            document.body.appendChild(err);

            setTimeout(() => {
                err.style.transition = "opacity 1s";
                err.style.opacity = "0";
                setTimeout(() => err.remove(), 1000);
            }, 2500);
        });
        function calculatePrestigeRequirement() {
            return 10000 * (prestigelvl + 1);
        }

        function prestige() {
            if (score >= calculatePrestigeRequirement()) {

                prestigelvl++;
                prestigeMult = 1 + prestigelvl * 0.5;  // each prestige = +50%

                // RESET EVERYTHING EXCEPT PRESTIGE
                score = 0;
                upgrades = 0;
                localStorage.setItem("prestigeBtn", prestigelvl);
                updateScore();
                updatePrestigeUI();
            }
        }

        function updatePrestigeUI() {
            document.getElementById("prestigeInfo").textContent =
                "Prestige Multiplier: x" + prestigeMult;
            document.getElementById("prestigeBtn").textContent =
                "Prestige (Requires " + calculatePrestigeRequirement() + ")";
        }

        // Modify click function
        function addPoint() {
            animateButton();
            playClickSound();
            score += (1 + upgrades) * prestigeMult;
            updateScore();
        }
        let lastOnline = Date.now();

        window.addEventListener("beforeunload", () => {
            localStorage.setItem("lastOnline", Date.now());
            localStorage.setItem("score", score);
        });
        checkAchivements(); // Check achievements on load
        giveDailyReward(); // Give daily reward if applicable
        function showMissingSoundPopup() {
            const popup = document.createElement("div");
            popup.id = "soundErrorPopup";
            popup.innerHTML = `
        <div class="popup-content">
            <h2>‚ö†Ô∏è Sound File Missing</h2>
            <p>The file <b>clk.mp3</b> could not be loaded.</p>
            <p>sounds will NOT work if tranfered by USB or if sound is not dowloaded</p>
            <button id="closeSoundPopup">OK</button>
        </div>
    `;

            document.body.appendChild(popup);

            document.getElementById("closeSoundPopup").onclick = () => {
                popup.remove();
            };
        }
        button.addEventListener("click", (e) => {
            const rect = button.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top;
        });
        document.addEventListener("click", (e) => {
            spawnParticles(e.clientX, e.clientY);
        });
        function resizeCanvas() {
            const dpr = window.devicePixelRatio || 1;

            canvas.width = window.innerWidth * dpr;
            canvas.height = window.innerHeight * dpr;

            canvas.style.width = window.innerWidth + "px";
            canvas.style.height = window.innerHeight + "px";

            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        }

        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);
        //check if cavas initialized

        if (!canvas || !ctx) {
            console.error("Canvas not initialized");
        }
    </script>

</body>

</html>